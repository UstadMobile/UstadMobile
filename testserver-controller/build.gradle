plugins {
    id 'application'
    id 'kotlin'
    id 'com.github.johnrengelman.shadow' version "$version_shadow"
}


mainClassName = 'io.ktor.server.netty.EngineMain'

shadowJar {
    manifest {
        attributes 'Main-Class': mainClassName
    }
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation project(":lib-util")
    implementation "com.squareup.okhttp3:mockwebserver:$version_mockwebserver"
    implementation "org.nanohttpd:nanohttpd:$version_nanohttpd"
    implementation "org.json:json:$version_json"
    implementation "commons-cli:commons-cli:$version_apache_commons_cli"
    implementation "io.ktor:ktor-server-netty:$version_ktor"
    implementation "io.ktor:ktor-server-core:$version_ktor"
    implementation "io.ktor:ktor-server-cors:$version_ktor"
    implementation "io.ktor:ktor-server-call-logging:$version_ktor"
    implementation "io.ktor:ktor-server-content-negotiation:$version_ktor"
    implementation "io.ktor:ktor-server-conditional-headers:$version_ktor"
    implementation "ch.qos.logback:logback-classic:$version_logback"
    implementation "io.ktor:ktor-serialization-gson:$version_ktor"
    implementation "com.google.code.gson:gson:$version_gson"

    testImplementation "junit:junit:$version_junit"
}

ext.buildConfigProperties = new Properties()
ext.buildConfigProperties.load(new FileInputStream(rootProject.file("buildconfig.default.properties")))
if(rootProject.file("buildconfig.local.properties").exists()) {
    ext.buildConfigProperties.load(new FileInputStream(rootProject.file("buildconfig.local.properties")))
}


sourceCompatibility = "1.8"
targetCompatibility = "1.8"
