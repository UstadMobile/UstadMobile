var jsonQuestions=null,questionsCounter=0,correctAnswers=0;function readJson(){var e=new XMLHttpRequest;e.open("GET","questions.json",!1),e.send(null),jsonQuestions=JSON.parse(e.responseText),displayQuestion(questionsCounter)}function displayQuestion(e){document.getElementById("correctAnswer").setAttribute("class","waves-effect waves-light btn"),e>=jsonQuestions.questions.length&&displayResults(correctAnswers),document.getElementById("question").innerHTML=jsonQuestions.questions[e].questionText;var t=document.getElementById("choices"),n=document.getElementById("nextquestion"),s=document.getElementById("explaination"),o=document.getElementById("video"),i=document.getElementById("imageQuiz");n.style.display="none",s.innerHTML="",t.innerHTML="",o.innerHTML="",i.style.display="none";var r=jsonQuestions.questions[e].videoHref;if(checkIsImage(r))i.style.display="block",o.style.display="none",i.setAttribute("src",r);else{var u=document.createElement("source");u.setAttribute("src",r),u.setAttribute("type","video/mp4"),o.appendChild(u),o.load()}var c=document.createElement("form");c.setAttribute("action","#");for(var l=0;l<jsonQuestions.questions[e].choices.length;l++){var d=document.createElement("p"),a=document.createElement("input");a.setAttribute("type","radio"),a.setAttribute("class","with-gap"),a.setAttribute("name","choice"),a.setAttribute("id",jsonQuestions.questions[e].choices[l].id);var m=document.createElement("label");m.setAttribute("for",jsonQuestions.questions[e].choices[l].id),m.setAttribute("display","inline-block"),m.innerHTML=jsonQuestions.questions[e].choices[l].answerText,d.appendChild(a),d.appendChild(m),c.appendChild(d)}t.appendChild(c)}function checkIsImage(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)}function displayResults(e){var t=document.getElementById("choices"),n=document.getElementById("nextquestion"),s=document.getElementById("explaination"),o=document.getElementById("video"),i=document.getElementById("correctAnswer");n.style.display="none",s.innerHTML="",t.innerHTML="",o.innerHTML="",o.style.display="none",i.style.display="none";var r=jsonQuestions.questions.length,u=e/r*100,c="Thank you for taking our quiz. Your score is "+u+"% meaning you have answered "+e+" correct answers from total "+r+" questions.",l=document.createElement("div");l.setAttribute("class","progress");var d=document.createElement("div");d.setAttribute("class","determinate"),d.setAttribute("style","width: "+u+"%"),l.appendChild(d);var a=document.createElement("h2");a.textContent=e+"/"+r;var m=document.getElementById("question");m.innerText=c,m.insertBefore(l,m.firstChild),m.insertBefore(a,m.firstChild)}function correctAnswer(e,t,n){document.getElementById("correctAnswer").setAttribute("class","btn disabled"),document.getElementById("nextquestion").style.display="inline-block";var s=document.getElementById("explaination");if(s.hasChildNodes())for(;s.hasChildNodes();)s.removeChild(s.lastChild);var o=document.createElement("h5");e?(t.style.backgroundColor="green",correctAnswers++,o.setAttribute("class","left-align green-text"),o.textContent="Correct !"):(o.setAttribute("class","left-align red-text"),o.textContent="Wrong !",t.style.backgroundColor="red",document.getElementById(n).style.backgroundColor="green");s.appendChild(o);var i=document.createElement("p");i.innerHTML=jsonQuestions.questions[questionsCounter].answer,s.appendChild(i)}function submitAnswer(){for(var e=document.getElementsByName("choice"),t=jsonQuestions.questions[questionsCounter].answerId,n=0;n<jsonQuestions.questions[questionsCounter].choices.length;n++)if(e[n].checked){t==e[n].getAttribute("id")?correctAnswer(!0,e[n],t):correctAnswer(!1,e[n],t);break}}