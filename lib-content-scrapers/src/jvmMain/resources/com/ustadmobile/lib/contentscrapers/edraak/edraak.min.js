var jsonQuestions=null,questionsCounter=0,hintsCounter=0;function readJson(){var e=new XMLHttpRequest;if(e.open("GET","questions.json",!1),e.send(null),404!=e.status)jsonQuestions=JSON.parse(e.responseText),displayQuestion(questionsCounter);else{var t=document.getElementById("correctAnswer"),n=document.getElementById("nextquestion"),s=document.getElementById("hintbtn");t.style.display="none",n.style.display="none",s.style.display="none"}}function displayQuestion(e){document.getElementById("correctAnswer").setAttribute("class","waves-effect waves-light btn"),hintsCounter=0,document.getElementById("question").innerHTML=jsonQuestions[e].full_description;var t=document.getElementById("choices"),n=document.getElementById("nextquestion"),s=document.getElementById("explaination"),i=document.getElementById("hints");n.style.display="none",s.innerHTML="",t.innerHTML="",i.innerHTML="";var o=jsonQuestions[e].hints,r=document.getElementById("hintbtn");if(0===o.length?r.setAttribute("class","btn disabled"):r.setAttribute("class","waves-effect waves-light btn"),"NumericResponseQuestion"===jsonQuestions[questionsCounter].component_type){var l=document.createElement("input");l.setAttribute("class","right-align"),l.setAttribute("id","edittext"),l.setAttribute("type","text"),l.setAttribute("placeholder","أجب هنا"),t.appendChild(l),linebreak=document.createElement("br"),t.appendChild(linebreak)}else if("MultipleChoiceQuestion"===jsonQuestions[questionsCounter].component_type){var c=document.createElement("form");c.setAttribute("action","#");for(var u=0;u<jsonQuestions[e].choices.length;u++){var d=document.createElement("p"),a=document.createElement("input");a.setAttribute("type","radio"),a.setAttribute("class","with-gap"),a.setAttribute("name","choice"),a.setAttribute("id","choice"+u);var m=document.createElement("label");m.setAttribute("for","choice"+u),m.setAttribute("display","inline-block"),m.innerHTML=jsonQuestions[e].choices[u].description,d.appendChild(a),d.appendChild(m),c.appendChild(d)}t.appendChild(c)}}function formatAnswer(e){return e.replace(/^0+/,"").replace(/\.0+$/,"")}function incorrectAnswer(){var e=document.getElementById("explaination");if(e.hasChildNodes())for(;e.hasChildNodes();)e.removeChild(e.lastChild);var t=document.createElement("h5");t.setAttribute("class","right-align red-text"),t.textContent="حاول مرة أخرى",e.appendChild(t)}function correctAnswer(){document.getElementById("correctAnswer").setAttribute("class","btn disabled"),document.getElementById("nextquestion").style.display="block";var e=document.getElementById("explaination");if(e.hasChildNodes())for(;e.hasChildNodes();)e.removeChild(e.lastChild);var t=document.createElement("h5");t.setAttribute("class","right-align green-text"),t.textContent="أحسنت! إجابتك صحيحة.",e.appendChild(t);var n=document.createElement("h5");n.setAttribute("class","right-align"),n.textContent="الشرح",e.appendChild(n);var s=document.createElement("p");s.innerHTML=jsonQuestions[questionsCounter].explanation,e.appendChild(s)}function displayHints(e){var t=jsonQuestions[questionsCounter].hints,n=document.getElementById("hints"),s=document.createElement("h5");s.setAttribute("class","right-align green-text"),s.textContent=" تلميح "+(e+1)+" / "+t.length;var i=document.createElement("h6");(i.setAttribute("class","right-align"),i.innerHTML=t[e].description,n.appendChild(s),n.appendChild(i),++hintsCounter===t.length)&&document.getElementById("hintbtn").setAttribute("class","btn disabled")}function submitAnswer(){if("NumericResponseQuestion"===jsonQuestions[questionsCounter].component_type)formatAnswer(document.getElementById("edittext").value)==formatAnswer(jsonQuestions[questionsCounter].correct_answer_precise)?correctAnswer():incorrectAnswer();else if("MultipleChoiceQuestion"===jsonQuestions[questionsCounter].component_type)for(var e=document.getElementsByName("choice"),t=0;t<jsonQuestions[questionsCounter].choices.length;t++)if(e[t].checked){jsonQuestions[questionsCounter].choices[t].is_correct?correctAnswer():incorrectAnswer();break}}function hideVideoOnError(){document.getElementById("video").style.display="none"}