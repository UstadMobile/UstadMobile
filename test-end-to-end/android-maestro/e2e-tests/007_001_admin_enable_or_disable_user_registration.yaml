appId: com.toughra.ustadmobile
env:
 TESTRESULTSDIR: "${TESTRESULTSDIR}/007_001_admin_enable_or_disable_user_registration"
 TESTNAME:  "007_001_admin_enable_or_disable_user_registration"
---
- clearState: com.toughra.ustadmobile
- runFlow:
   file: "../common/startserver.yaml"
   env:
    CONTROLSERVER: ${CONTROLSERVER}
    TESTSERIAL: ${TESTSERIAL}
    TESTNAME: ${TESTNAME}

- runFlow: "../common/clear_state_and_learning_space_existing_userflow.yaml"
- runFlow: "../common/select_site.yaml"
#admin enable user registration
- runFlow:
   file: "../common/user_login.yaml"
- runFlow:
    file: "../common/enable_user_registration.yaml"
- assertVisible: "Yes"
- runFlow: "../common/clear_state_and_learning_space_new_userflow.yaml"
- runFlow: "../common/select_site.yaml"
- tapOn: 2024
- longPressOn: 2024
- inputText: 2009
- hideKeyboard
- tapOn: 2009
- tapOn: "* Required"
- tapOn: "Next"
- extendedWaitUntil:
    visible:  "Terms and company policies"
    timeout: 10000
- assertVisible: "Accept"

#admin disable user registration
- runFlow: "../common/clear_state_and_learning_space_existing_userflow.yaml"
- runFlow: "../common/select_site.yaml"
- runFlow:
    file: "../common/user_login.yaml"
- tapOn: "Library"
- tapOn: "Settings"
- tapOn: "Site"
- tapOn:
    id: "floating_action_button"
- tapOn:
    id: "registration_allowed"
- tapOn: "Save"
- assertNotVisible: "Yes"
- runFlow: "../common/clear_state_and_learning_space_new_userflow.yaml"
- runFlow: "../common/select_site.yaml"
- assertVisible: "Learning space does not allow new user registration"