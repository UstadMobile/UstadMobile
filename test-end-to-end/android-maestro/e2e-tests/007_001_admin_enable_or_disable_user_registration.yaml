appId: com.toughra.ustadmobile
env:
 TESTRESULTSDIR: "${TESTRESULTSDIR}/007_001_admin_enable_or_disable_user_registration"
 TESTNAME:  "007_001_admin_enable_or_disable_user_registration"
---
- clearState: com.toughra.ustadmobile
- runFlow:
   file: "../common/startserver.yaml"
   env:
    CONTROLSERVER: ${CONTROLSERVER}
    TESTSERIAL: ${TESTSERIAL}
    TESTNAME: ${TESTNAME}

- runFlow: "../common/clear_state_and_get_started.yaml"
- runFlow: "../common/select_site.yaml"
#admin enable user registration
- runFlow:
   file: "../common/user_login.yaml"
- runFlow:
    file: "../common/enable_user_registration.yaml"
- assertVisible: "Yes"
- runFlow: "../common/clear_state_and_get_started.yaml"
- runFlow: "../common/select_site.yaml"
- assertVisible: "Create account"

#admin disable user registration
- runFlow:
    file: "../common/user_login.yaml"
- tapOn: "Library"
- tapOn: "Settings"
- tapOn: "Site"
- tapOn:
    id: "floating_action_button"
- tapOn:
    id: "registration_allowed"
- tapOn: "Save"
- assertNotVisible: "Yes"
- runFlow: "../common/clear_state_and_get_started.yaml"
- runFlow: "../common/select_site.yaml"
- assertNotVisible: "Create account"