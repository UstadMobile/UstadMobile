appId: com.toughra.ustadmobile
tags:
  - checklist0
env:
  TESTRESULTSDIR: "${TESTRESULTSDIR}/006_005_admin_can_enable_or_disable_guest_login"
  TESTNAME: 006_005_admin_can_enable_or_disable_guest_login.yaml
---
- clearState: com.toughra.ustadmobile
- runFlow:
    file: "../common/startserver.yaml"
    env:
      CONTROLSERVER: ${CONTROLSERVER}
      TESTSERIAL: ${TESTSERIAL}
      TESTNAME: ${TESTNAME}
# admin enable user registration button
- runFlow: "../build/common-app2/clear_state_and_get_started.yaml"
- runFlow: "../build/common-app2/select_site.yaml"
- runFlow:
    file: "../build/common-app2/user_login.yaml"
- runFlow:
    file: "../build/common-app2/enable_guest_login.yaml"
# test registration button is visible
- runFlow: "../common/clear_state_and_get_started.yaml"
- runFlow: "../common/select_site.yaml"
- assertVisible: "Connect as Guest"
# admin disable the user registration button
- runFlow:
    file: "../common/user_login.yaml"
- runFlow:
    file: "../common/enable_guest_login.yaml"
# test user registration button not visible
- runFlow: "../build/common-app2/clear_state_and_get_started.yaml"
- runFlow: "../build/common-app2/select_site.yaml"
- assertNotVisible: "Connect as Guest"
- clearState: com.toughra.ustadmobile
- clearState: com.ustadmobile.ustadapiconsumer