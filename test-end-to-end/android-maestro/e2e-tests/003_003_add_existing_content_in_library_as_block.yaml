appId: com.toughra.ustadmobile
env:
  TESTRESULTSDIR: "${TESTRESULTSDIR}/003_003_add_ content_block_and_link_existing_content"
  TESTNAME: "003_003_add_ content_block_and_link_existing_content"
---
- clearState: com.toughra.ustadmobile
- runFlow:
    file: "../common/startserver.yaml"
    env:
      CONTROLSERVER: ${CONTROLSERVER}
      TESTSERIAL: ${TESTSERIAL}
      TESTNAME: ${TESTNAME}
  #---------add content to library ---------#
- runFlow:
    file: "../common/add_content.yaml"
    env:
      TESTFILENAME: "H5p_Content.h5p"
      TESTCONTENTNAME: H5PContent
      CONTROLSERVER: ${CONTROLSERVER}
      TESTSERIAL: ${TESTSERIAL}
#---------add content to library ---------#
- runFlow:
    file: "../common/add_content.yaml"
    env:
      TESTFILENAME: Epub_Content.epub
      TESTCONTENTNAME: EpubContent
      CONTROLSERVER: ${CONTROLSERVER}
      TESTSERIAL: ${TESTSERIAL}
#---------add course ---------#
- runFlow:
    file: "../common/add_course.yaml"
    env:
      TESTCOURSENAME: "Existing Content Block Test"
#----add teacher to the course----#
- runFlow:
    file: "../common/add_new_teacher_inside_course.yaml"
    env:
      TEACHERFIRSTNAME: "Anupama"
      TEACHERLASTNAME: "Sebastian"
      GENDER: "Female"
      PASSWORD: "test"
#--- add epub content already added by admin in library to course block----#
- back
- back
- tapOn: "OVERVIEW"
- runFlow:
    file: "../common/add_existing_content_block_to_course.yaml"
- tapOn:
    text: "SELECT "
    index: 0
- tapOn: "SAVE"
- tapOn: "SAVE"

#---------Launch App & Teacher Login------------------#
- runFlow: "../common/clear_state_and_get_started.yaml"
- runFlow: "../common/select_site.yaml"
- runFlow:
    file: "../common/user_login.yaml"
    env:
      USERNAME: "Anupama"
      PASSWORD: "test"
- tapOn: "courses"
- tapOn:
    id: "com.toughra.ustadmobile:id/item_clazzlist_clazz_cl"
#--- add h5p content already added by admin in library to course block --#
- runFlow:
    file: "../common/add_existing_content_block_to_course.yaml"
- tapOn:
    text: "SELECT "
    index: 1
- tapOn: "SAVE"
- tapOn: "SAVE"
- takeScreenshot: "${TESTRESULTSDIR}/able_to_add_existing_content_block_inside_course"





